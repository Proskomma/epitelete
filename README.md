# Epitelete

PERF Middleware for Editors in the Proskomma Ecosystem

## Installation

    npm install epitelete

## Usage

    import Epitelete from 'epitelete';

    // Instantiate Proskomma and load some content into it

    const epi = new Epitelete({proskomma: proskommaInstance, docSetId: "doc_set_id"});

    epi.localBookCodes()   // => Array of 3-character book codes cached in Epitelete
    epi.bookHeaders()      // => Object containing titles and other headers for each bookCode in Proskomma
    epi.readPerf(bookCode) // => PERF for this bookCode, fetching from Proskomma if necessary
    epi.clearPerf()        // Deletes all local PERF data

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

- [Epitelete](#epitelete)
  - [Installation](#installation)
  - [Usage](#usage)
  - [API](#api)
      - [Table of Contents](#table-of-contents)
    - [sequencePerf](#sequenceperf)
    - [Epitelete](#epitelete-1)
      - [Parameters](#parameters)
      - [proskomma](#proskomma)
      - [docSetId](#docsetid)
      - [history](#history)
      - [backend](#backend)
      - [getDocument](#getdocument)
        - [Parameters](#parameters-1)
      - [getDocuments](#getdocuments)
      - [addDocument](#adddocument)
        - [Parameters](#parameters-2)
      - [fetchPerf](#fetchperf)
        - [Parameters](#parameters-3)
      - [readPerf](#readperf)
        - [Parameters](#parameters-4)
      - [writePerf](#writeperf)
        - [Parameters](#parameters-5)
      - [checkPerfSequence](#checkperfsequence)
        - [Parameters](#parameters-6)
      - [localBookCodes](#localbookcodes)
      - [bookHeaders](#bookheaders)
      - [clearPerf](#clearperf)
      - [canUndo](#canundo)
        - [Parameters](#parameters-7)
      - [canRedo](#canredo)
        - [Parameters](#parameters-8)
      - [undoPerf](#undoperf)
        - [Parameters](#parameters-9)
      - [redoPerf](#redoperf)
        - [Parameters](#parameters-10)
      - [sideloadPerf](#sideloadperf)
        - [Parameters](#parameters-11)

### sequencePerf

Type: [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)<[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)>

### Epitelete

PERF Middleware for Editors in the Proskomma Ecosystem

#### Parameters

*   `$0` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

    *   `$0.proskomma`   (optional, default `null`)
    *   `$0.docSetId`  
    *   `$0.options`   (optional, default `{}`)
*   `args` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** constructor args

#### proskomma

Type: UWProskomma

#### docSetId

Type: integer

#### history

Type: [history](https://developer.mozilla.org/docs/Web/Guide/API/DOM/Manipulating_the_browser_history)

#### backend

Type: (`"proskomma"` | `"standalone"`)

#### getDocument

Gets a copy of a document from history

##### Parameters

*   `bookCode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **documentPerf** 

#### getDocuments

Gets object containing documents copies from history

#### addDocument

Adds new document to history (replaces any doc with same bookCode already in history)

##### Parameters

*   `bookCode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
*   `doc` **documentPerf** 

#### fetchPerf

Fetches document from proskomma instance

##### Parameters

*   `bookCode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### readPerf

Gets document from memory or fetches it if proskomma is set.

##### Parameters

*   `bookCode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### writePerf

Merges a sequence with the document and saves the new modified document.

##### Parameters

*   `bookCode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
*   `sequenceId` **integer** 
*   `perfSequence` **[sequencePerf](#sequenceperf)** 

Returns **[sequencePerf](#sequenceperf)** 

#### checkPerfSequence

?Checks Perf Sequence

##### Parameters

*   `perfSequence` **[sequencePerf](#sequenceperf)** 

#### localBookCodes

Get array of book codes from history

#### bookHeaders

Gets the available books for current docSet. Returns an object with book codes as keys, and values
contain book header data

Returns **{}** 

#### clearPerf

Clears docs history

#### canUndo

Checks if able to undo from specific book history

##### Parameters

*   `bookCode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### canRedo

Checks if able to redo from specific book history

##### Parameters

*   `bookCode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### undoPerf

Gets previous document from history

##### Parameters

*   `bookCode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **documentPerf?** 

#### redoPerf

Gets next document from history

##### Parameters

*   `bookCode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **documentPerf?** 

#### sideloadPerf

Loads given perf into memory

##### Parameters

*   `bookCode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
*   `perfJSON` **documentPerf** 

Returns **documentPerf** 
